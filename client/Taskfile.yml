# https://taskfile.dev

version: '3'

vars:
  APP_NAME: swipelearn-client
  NODE_VERSION: 24
  PACKAGE_MANAGER: pnpm

tasks:
  default:
    desc: Show available client tasks
    cmds:
      - task --list | head -15

  # Core development
  install:
    desc: Install dependencies
    cmds:
      - echo "ğŸ“¦ Installing dependencies..."
      - pnpm install

  dev:
    desc: Start development server
    cmds:
      - echo "ğŸš€ Starting development server..."
      - pnpm run dev

  build:
    desc: Build for production
    cmds:
      - echo "ğŸ—ï¸ Building for production..."
      - pnpm run build

  # Testing
  test:
    desc: Run tests
    cmds:
      - echo "ğŸ§ª Running tests..."
      - pnpm run test

  test-coverage:
    desc: Run tests with coverage
    cmds:
      - echo "ğŸ“Š Running tests with coverage..."
      - pnpm run test:coverage

  # Code quality
  lint:
    desc: Run linter
    cmds:
      - echo "ğŸ” Running linter..."
      - pnpm run lint

  fmt:
    desc: Format code
    cmds:
      - echo "ğŸ¨ Formatting code..."
      - pnpm run format

  type-check:
    desc: Run TypeScript type checking
    cmds:
      - echo "ğŸ” Running type checks..."
      - pnpm run type-check

  # Utilities
  clean:
    desc: Clean build artifacts
    cmds:
      - echo "ğŸ§¹ Cleaning..."
      - rm -rf node_modules dist build coverage

  update:
    desc: Update dependencies
    cmds:
      - echo "â¬†ï¸ Updating dependencies..."
      - pnpm update

  # Preview
  preview:
    desc: Preview production build
    deps: [build]
    cmds:
      - echo "ğŸ‘€ Previewing production build..."
      - pnpm run preview

  # Workflows
  dev-check:
    desc: Run dev workflow (lint, type-check, test)
    deps: [lint, type-check, test]
    cmds:
      - echo "âœ… Development workflow completed!"

  ci:
    desc: Run CI pipeline (lint, type-check, test, build)
    deps: [lint, type-check, test, build]
    cmds:
      - echo "âœ… CI pipeline completed!"

  # Setup
  setup:
    desc: Initial setup for new developers
    cmds:
      - echo "ğŸ”§ Setting up SwipeLearn Client..."
      - task: install
      - task: test
      - echo "âœ… Setup complete! Run 'task dev' to start development"
